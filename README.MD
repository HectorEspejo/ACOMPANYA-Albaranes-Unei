# ğŸ½ï¸ ALBA - Sistema de GestiÃ³n de Albaranes

Sistema integral de gestiÃ³n para cocinas y caterings que permite administrar ingredientes, platos, menÃºs y generar albaranes de entrega con control de stock y trazabilidad completa.

## ğŸ“‹ Funcionalidades Principales

### ğŸ¥„ GestiÃ³n de Ingredientes
- **Control de Stock**: Inventario en tiempo real con diferentes unidades de medida
- **Trazabilidad**: Seguimiento de lotes y fechas de caducidad
- **Movimientos**: Registro automÃ¡tico de entradas, salidas y ajustes
- **ImportaciÃ³n**: Carga masiva desde archivos CSV

### ğŸ— GestiÃ³n de Platos
- **Recetas**: DefiniciÃ³n de ingredientes necesarios para cada plato
- **ProducciÃ³n**: PreparaciÃ³n de lotes con descuento automÃ¡tico de stock
- **Stock**: Control de platos preparados disponibles
- **Trazabilidad**: Seguimiento de ingredientes utilizados por lote

### ğŸ½ï¸ GestiÃ³n de MenÃºs
- **ComposiciÃ³n**: CombinaciÃ³n de mÃºltiples platos por tipo de comida
- **Calendario**: PlanificaciÃ³n de menÃºs por dÃ­a de la semana
- **PreparaciÃ³n**: ProducciÃ³n masiva con control de disponibilidad
- **Tipos**: CategorizaciÃ³n por desayuno, almuerzo, cena, merienda

### ğŸ‘¥ GestiÃ³n de Clientes
- **Base de Datos**: Registro de clientes con informaciÃ³n de contacto
- **ImportaciÃ³n**: Carga masiva desde archivos CSV
- **Historial**: Seguimiento de pedidos por cliente

### ğŸ“„ Sistema de Albaranes
- **GeneraciÃ³n Individual**: CreaciÃ³n de albaranes personalizados
- **GeneraciÃ³n Masiva**: Albaranes automÃ¡ticos para mÃºltiples clientes
- **DuplicaciÃ³n**: Copia de albaranes existentes con ajustes
- **ImpresiÃ³n**: Formato optimizado para impresiÃ³n
- **ExportaciÃ³n**: Descarga en formato CSV

### ğŸ“Š Cuadro de Mando
- **AnÃ¡lisis de Ventas**: EstadÃ­sticas detalladas por perÃ­odo
- **VisualizaciÃ³n**: GrÃ¡ficos interactivos y tablas dinÃ¡micas
- **MÃ©tricas**: 
  - Unidades de menÃºs vendidos por tipo
  - Platos mÃ¡s populares
  - Ventas por cliente
- **ExportaciÃ³n**: Reportes en CSV
- **Filtros**: AnÃ¡lisis por rangos de fechas personalizables

### ğŸ” Sistema de AutenticaciÃ³n
- **Login Obligatorio**: Acceso protegido a todas las funcionalidades
- **GestiÃ³n de Usuarios**: Base de datos segura con contraseÃ±as hasheadas
- **Sesiones Seguras**: Control de sesiones con Flask-Login
- **Script de GestiÃ³n**: Herramienta administrativa para crear/eliminar usuarios
- **Interfaz Intuitiva**: Login responsive con validaciÃ³n de credenciales

### ğŸ“¥ Sistema de ImportaciÃ³n
- **Tipos de MenÃº**: DefiniciÃ³n de categorÃ­as de comida
- **MenÃºs Masivos**: Carga de mÃºltiples menÃºs con platos
- **Inventario**: ImportaciÃ³n de stock inicial
- **Platos**: Carga masiva con recetas incluidas

## ğŸ”§ TecnologÃ­as Utilizadas

### Backend
- **Flask**: Framework web de Python
- **Flask-Login**: Sistema de autenticaciÃ³n y sesiones
- **SQLAlchemy**: ORM para base de datos
- **SQLite**: Base de datos embebida
- **Python 3.10+**: Lenguaje de programaciÃ³n
- **Werkzeug**: Utilidades WSGI y hashing seguro

### Frontend
- **Bootstrap 4**: Framework CSS responsivo
- **jQuery**: Biblioteca JavaScript
- **DataTables**: Tablas interactivas con bÃºsqueda y ordenamiento
- **Chart.js**: GrÃ¡ficos interactivos
- **Font Awesome**: IconografÃ­a

### CaracterÃ­sticas TÃ©cnicas
- **Arquitectura MVC**: SeparaciÃ³n clara de responsabilidades
- **Blueprints**: ModularizaciÃ³n de rutas
- **Sistema de Login**: AutenticaciÃ³n obligatoria con Flask-Login
- **ValidaciÃ³n**: Control de datos y relaciones
- **Manejo de Errores**: Sistema robusto de excepciones
- **Modo Debug**: Funcionalidad especial para desarrollo

## ğŸ“ Estructura del Proyecto

```
alabaranes-unei2/
â”œâ”€â”€ app.py                 # AplicaciÃ³n principal
â”œâ”€â”€ config.py             # ConfiguraciÃ³n
â”œâ”€â”€ database/             # Modelos de base de datos
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py
â”‚   â””â”€â”€ database.db
â”œâ”€â”€ routes/               # Rutas por mÃ³dulo
â”‚   â”œâ”€â”€ albaranes.py
â”‚   â”œâ”€â”€ albaranes_masivos.py
â”‚   â”œâ”€â”€ clientes.py
â”‚   â”œâ”€â”€ cuadro_mando.py
â”‚   â”œâ”€â”€ importar.py
â”‚   â”œâ”€â”€ ingredientes.py
â”‚   â”œâ”€â”€ menus.py
â”‚   â””â”€â”€ platos.py
â”œâ”€â”€ templates/            # Plantillas HTML
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ albaranes/
â”‚   â”œâ”€â”€ clientes/
â”‚   â”œâ”€â”€ cuadro_mando/
â”‚   â”œâ”€â”€ importar/
â”‚   â”œâ”€â”€ ingredientes/
â”‚   â”œâ”€â”€ menus/
â”‚   â””â”€â”€ platos/
â”œâ”€â”€ static/               # Archivos estÃ¡ticos
â”‚   â”œâ”€â”€ css/
â”‚   â””â”€â”€ js/
â”œâ”€â”€ utils/                # Utilidades
â”‚   â””â”€â”€ stock_manager.py
â”œâ”€â”€ crear_usuarios.py     # Script de gestiÃ³n de usuarios
â””â”€â”€ requirements.txt      # Dependencias
```

## ğŸš€ InstalaciÃ³n y Uso

### Requisitos Previos
- Python 3.10 o superior
- pip (gestor de paquetes de Python)

### InstalaciÃ³n
```bash
# Clonar el repositorio
git clone [repository-url]
cd alabaranes-unei2

# Crear entorno virtual
python -m venv venv
source venv/bin/activate  # En Windows: venv\Scripts\activate

# Instalar dependencias
pip install -r requirements.txt

# Crear usuarios del sistema
python crear_usuarios.py

# Ejecutar la aplicaciÃ³n
python app.py
```

### Acceso
- **URL**: http://localhost:5000
- **Puerto**: 5000 (configurable)
- **Host**: 0.0.0.0 (accesible desde la red local)

### Credenciales de Prueba
- **Usuario**: admin
- **ContraseÃ±a**: admin123

*Nota: Es recomendable cambiar estas credenciales en producciÃ³n*

## âš™ï¸ ConfiguraciÃ³n

### Modo Debug
Para habilitar el modo debug (desactiva validaciones de stock):
```python
# En config.py
DEBUG_MODE = True
```

### Base de Datos
La aplicaciÃ³n utiliza SQLite por defecto. La base de datos se crea automÃ¡ticamente en `database/database.db`.

### Datos de Ejemplo
Ejecutar `load_sample_data.py` para cargar datos de prueba:
```bash
python load_sample_data.py
```

## ğŸ“ˆ CaracterÃ­sticas Avanzadas

### Trazabilidad
- **Seguimiento completo** desde ingredientes hasta entrega
- **Registro de lotes** en cada movimiento de stock
- **Historial detallado** de todas las operaciones

### Control de Stock
- **Validaciones automÃ¡ticas** antes de producciÃ³n
- **Alertas de stock insuficiente**
- **Movimientos de stock** registrados automÃ¡ticamente

### Reportes
- **ExportaciÃ³n CSV** de todos los mÃ³dulos
- **Formato Excel** compatible con BOM UTF-8
- **Datos filtrados** por fechas y criterios especÃ­ficos

### Interfaz de Usuario
- **Responsive Design** adaptable a dispositivos mÃ³viles
- **BÃºsqueda en tiempo real** en todas las tablas
- **PaginaciÃ³n automÃ¡tica** para grandes volÃºmenes de datos
- **Feedback visual** con mensajes de estado

## ğŸ› ï¸ Desarrollo y Mantenimiento

### Logs y Debugging
- Sistema de logs integrado
- Modo debug configurable
- Manejo de excepciones detallado

### Escalabilidad
- Arquitectura modular preparada para crecimiento
- Base de datos relacional optimizada
- APIs REST para integraciones futuras

### Seguridad
- **Sistema de AutenticaciÃ³n**: Login obligatorio para todas las funcionalidades
- **ContraseÃ±as Seguras**: Hash con Werkzeug para protecciÃ³n de credenciales
- **GestiÃ³n de Sesiones**: Control seguro con Flask-Login
- **ValidaciÃ³n de Datos**: Control en servidor y cliente
- **ProtecciÃ³n SQL**: PrevenciÃ³n de inyecciÃ³n mediante ORM
- **Manejo de Archivos**: Procesamiento seguro de CSV

---

*Desarrollado para la gestiÃ³n eficiente de cocinas industriales con enfoque en trazabilidad y control de calidad.*